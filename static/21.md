---
Id: 21
Title: Kubernetes组件
Date: 陆月壹
Year: 2021
Summary: 读《Kubernetes源码剖析》笔记
Tags:
  - Kubernetes
---

# 总体架构

Kubernetes系统采用C/S架构，分为Master和Node两个部分，Master作为Server端，Node作为Client端。

多Master的方式可以实现集群的高可用。

Master也叫做主控节点，它主要负责：
- 管理所有的节点
- 调度POD
- 控制集群运行过程中的所有状态
包含了以下几个组件：
- API-Server：集群的HTTP REST接口，统一入口
- Controller-Manager：所有资源的自动化控制中心
- Scheduler：POD调度

Node也叫做工作节点，主要负责：
- 管理所有容器
- 监控、上报所有POD的运行状态
包含了以下几个组件：
- Kubelet：管理节点上容器的生命，与Master节点通信
- Kube-Proxy：服务通信、负载均衡
- CRI容器运行时：接收kubelet的容器相关的指令并执行

Master节点也拥有Node相关的组件，即该Master也可以作为工作节点进行计算。

除此之外，k8s内部的存储采用ETCD作为唯一存储，一般采用集群高可用的方式部署。

Etcd集群是分布式K/V存储集群，提供了可靠的强一致性服务发现。Etcd集群存储Kubernetes系统的集群状态和元数据，其中包括所有Kubernetes资源对象信息、资源对象状态、集群节点信息等。Kubernetes将所有数据存储至Etcd集群前缀为/registry的目录下。
# 各个组件的功能

在k8s集群中主要有以下几种组件：

## kubectl

## client-go

## API-Server

## Controller-Manager

## Scheduler

## Kubelet

## Kube-Proxy

## CRI容器运行时组件